# 20190621

## 블록체인의 시작

### 비트코인:블록체인의 등장

#### 전자 화폐

* 곡신은 1만년 전부터 사용, 5000년 전부터 등장한 금사용
* 종이 화폐는 약 1000년전 중국에서 처음 사용, 장기간 금, 은본위
* 인터넷 발달하며 전자 화폐사용, 암호화폐 등장

#### 비트코인과 실물 화폐의 차이

#### 탈중앙화의 기여점

* 중개 비용 감소 등

#### 사이버 펑크 운동

* 신용카드 사용은 프라이버시의 안전을 지키지 못한다. 감시에서 자유롭지 않다. 현금은 거래에 본인 확인이 없다.
* 디지털 데이터 위변조 쉽다. 감지 기술 필요하다. 해시, 타임스탬프 등
* 문서 효율 감시 위해 해시 이용한 트리 구조의 데이터 저장 제안
* 암호 기술에 의해 정의 된 전자 지불 체계, 계약서만 찢으면 끝인 것에 반기
* 스마트 계약은 법적 원리, 경제학 등에 영향
* 무정부주의 B Money, 돈이라는 교환매체에 대해 새로운 방법 필요하다 생각, 이더리움의 아이디어
* 나카모토 사토시의 블록 체인 화폐 등장, peer to peer 거래 가능한 캐시 시스템
  * 무엇이 다른가? p2p네트워크로 당시 트랜젝션 문제였던 2중 지불을 못하게 만들었다.

#### 비트코인의 거래

##### 비트 코인은 탈중앙화 된 장부로 이루어짐

* 참여자가 모든 사람의 거래내역 저장- 분산화
* 합의 거래 결정- 분권화
* 교차 검증

#### peer to peer 네트워크

#### 블록 체인은 P2P 네트워크를 통해 거래를 저장함

* 클라이언트/서버는 계층을 두고 데이터 전공
* P2P는 동등 계층간 데이터 전공 기법
* 피어들은 서버와 클라이언트 역할 동시에 함

#### 비트코인의 부인 방지

* 다른 사람이 자신의 돈을 보낼 수 없어야 함
* 내가 보냈다는 사실을 추후에 부인 할 수 없어야 함

#### 비트코인의 지갑

* 개인키 생선:256비트 무작위 숫자;k
* 공개키 생선:k*G(생성포인트), 개인키 추론 불가;K
* 비트코인 주소 생성: Base 58(RIPEMD160(SHA2(K))) 등

#### 공개키 기반 구조 활용

* 받는 사람의 공개키로 암호화-> 개인키로 복원, 친구에게만 알려 주고 싶은 것
* 내 개인기로 암호화-> 공개키로 복원, 모두에게 알려 주고 싶은 것

#### 데이처 출처 검증

* 데이터 저장 시 데이터의 출처를 기록하여야 한다

#### 비트코인과 블록

* 트랜젝션을 통해 거래를 체인으로 연결

#### 해시 알고리즘

* 주로 원본 값의 위변조 여부 확인
* 출력값, 입력값 유추
* 입력-> 해시-> 출력
* 위조 입력-> 해시 -> 다른 출력
* 원본 값의 해시 코드 추출시 다르면 위변조가 진행 된 것

#### 블록 구성

* 이번 블록 해시코드
* 트랜젝션해시코드
* 블록 생성시간
* 문제 난이도
* 문제 정답

#### 트랜젝션의 저장 장소: 머클 트리

#### 비트코인 채굴하기

* 노가다반복

#### 작업 조절

#### 난이도 조절

* 매 2016 블록 마다 난이도 재계산
* 최대 난이도 2^224
* nonce는 헤더의 해시가 current_target보다낮은 경우 설립

#### 이중 지불의 사례

* 이중 지불은 완전 승인 전 다른 지불 진행 의미
* 비트코인은 승인에 시간이 걸려서 이중 지불 가능

#### 6승인과 포크

* 포크: 이중 지불을 하면 불록의 분기가 발생
* 6승인: 블록의 완전 승인은 6개의 블로이 더 생성 되어야 한다(1시간 걸려)
* 포크 시 블록 승인: 먼저 6승인을 성공한 블록이 완정 승인 됨
* 일반 노드들은 승인 확률이 높은 블록을 기반으로 블록을 생성
* 길이가 길거나 블록 시간이 빠른 쪽에 먼저 블록 생성

#### 51% 공격

* 이중 지불의 성공을 위해서는 전체 해시 파워의 51% 이상을 한시간 동안 장악해야 한다
* 이는 현실적으로 매우 어려움, 실제로는 51%보다 적다.

#### 블록체인 데이터가 신뢰 받는 이유

1. 한번 기록/승인된 데이터는 수정과 삭제가 불가능
2. 데이터 저장시 데이터의 출처기록
3. 참여자 보유 데이터의 무결성 검증
4. 모든 참여자가 합의를 이룬 데이터 저장

## 스마트 컨트랙트의 개요

#### 이더리움의 등장

* 게임 하다 너프 당한 케릭터, 중앙화에 반감으로 이더리움 개발 네트워크상 스마트 컨트랜트
* 그동안 비트코인 시스템의 방향에 대한 제안 많았는데 무시 되었다. 그중 하나

#### 스마트 컨트랙트의 기원

* 특정 계약을 스스로 수립, 검증, 이행하기 위한 컴퓨터 프로토콜
* 계약의 보안을 높이기 위한 방안
* 계약 비용을 감소하기 위한 방안
* 1994년 Nick Szabo가 처음 스마트 컨트랙트 단어 사용, 당시 코드 개발, 증명 힘들어

#### 블록체인과 스마트 컨트랙트

* 블록체인에 스마트 컨트랙트 데이터를 기록하겠다. 기록, 내용, 코드, 이행 이력, 결과

#### 프로그래머블 머니

* 검증된 프로그래밍 따라 돈이 지불 된다.
* 계약서에 따라 공증기관없이 강제 된다.
* 아직은 어렵다. 다양한 데이터의 문제

#### 블록체인 2.0

* 트랙젝션(송금) 밖에 못하는 블록체인대비 할 수 있는 것 늘어

* 이더리움-computational engine, decentralize database 등 이용

#### 스마트 컨트랙트 활용 사례

* 토큰 서비스
* 에스크로 서비스
  * 중간에 담보가 된다.
  * 분산화된 계약을 담보로 한다.

#### 스마트 컨트랙트의 전망

* 글쎄....많이들 망했다.

#### 이더리움 가상 머신

* Before VM
  * 모든 운영체제 맞게 컴파일, 실핼, 운영체제 따라 컴파일러 달라
  * 사용 되는 운영체제에 따라 프로그램 코드 다름
* 자바 가상 머신
  * 운영체제 시스템 콜 직접 호출X
  * 실행되는 운영체제에 관계없이 이용가능 등

#### 스마트 컨트랙트 배포 및 실행

* 스마트 계약 생성과정
  * 계약코드->바이트코드->블록체인 블록-> 블록체인 네트워크
* 스마트 계약 실행 과정
  * 사용자주소+함수주소+매개변수->트랜젝션 생성->블록체인 블록 실행

#### 튜링 완전성과 가스

* 무한한 문제 장치 안에서 모든 문제를 풀 수 있는 것
* 비트 코인은 루프문 없어, 무한 반복으로 디도스 돌지 않기 위함
* 튜링완전성을 위해 루프문 넣은 이더리움
* 가스 라는 단위, 가스 많을 수록 빠른 처리, 수수료
* 함수 종류 따라 비용 차등 부여

### 기업형 블록체인 비즈니스의 사례

#### R3CEV의 탄생

* 뉴욕 벤처 투자자와 8명의 은행 대표, 암호 화폐를 금융에 적용하기 위한 회의 진행

* 암호화폐 사업자와 11개 은행이 모여 확인

  고객의 데이터도 중요, 돈도 중요 어떻게 해야 할까?

* 은행간 거래에 중앙화 제거, 블록체인 방식 활용

* 중앙화에서 오는 중개비용과 해킹 위험 감소

* 기존 은행간 신뢰 부족으로 스위프트 통해, 청산소에서 바뀐다.

#### 공개형 블록체인의 한계

* 프라이버시
  * 고객또는 자산의 기밀성 보호해야 하기에 완전 공개 데이터 검증 구조는 무리
* 트랜잭션 최종성
  * 기록된 트랜잭션의 발샐 후 즉각적 확정 필요
  * 현재의 블록체인은 트랜잭션을 결정하는데 시간 소요
* 식별 가능한 참여자
  * 비즈니스에서 상대방이 누구인지 실별 할 수 있어야 함
  * 참여자가 규칙을 준수하는지도 확인할 수 있어야 한다.
  * 트랜잭션의 실명성이 검증 되양 함
* 확장성
  * 하루에 10억개의 트래내잭션을 처리할 수 있어야 한다.
  * 빠른 속도가 생명인 금융 거래에서 이러한 확장성 한계는 문제
* 생산성과 통합
  * 기업은~~

#### 코다의 아키텍처

* 허가형
  * 거래 참여자가 특정 되어야 하기에 인증 서비스 통해 인증 받은 사람만 참여 가능
* P2P

#### 공개형과 허가형의 차이

|                 | Public                       | Private                     |
| --------------- | ---------------------------- | --------------------------- |
| Participant     | Anyone                       | Aythorized                  |
| Data Access     | Any participant              | Permissioned read and wrtie |
| Throughput      | Slower                       | Faster                      |
| Block Gen./Val. | Proof of work Proof of stake | Agreed method               |
| Asset           | Native                       |                             |

#### 비즈니스 블록체인 개발 연합

* 리눅스 재단-hyperledger
  * 무료 제공으로 많은 블록체인 회사 부도, 마케팅 목적

#### 패브릭 적용 사례

* 월마트
  * 돼지의 탄생~ 식탁 앞까지 모든 이력 담는다.
  * IBM, 칭화대 참여
* 머스크
  * Trade Lens
  * 운송에 드는 수많은 정보 관리, 안전한 정보 교환
  * 조작이 불가능한 저장소, 운송지연과 불법 거래 방지
  * 떨어지는 위치 따라 보험의 문제, 사후 관리를 위한 블록체인

#### 활용 예상 분야

* 은행
  * 공급망 및 무역 금융
  * KYC
  * 거래 저장
  * 디지털 화폐
* 공급망
  * 작업 흐름 디지털화
  * 공급만 가시화
  * 출처 및 경로 추적
* 정치
  * 자산등록
  * 주민신원
  * 허위와 실제 판별
  * 선어
* 금융시장
  * 거래 후 처리 과정
  * 미등록 증권, 사모펀드
  * 참조데이터
  * 화폐간 지금 결제
  * 모기지
* 의료
  * 의료 데이터 교환
  * 임상 시험 관리
  * 결과 기반 계약
  * 약제 공급망
* 보험
  * 복잡한 계약 등

### 프로젝트 소개

#### 1주

* 이해, 사전 작업, 기초역량 습득, cli 창에서 작업하는 것에 익숙해져야 한다.
* 이더리움과 하이버레져 패브릭에 대해 이해하고 스몰 프로젝트 수행, 디지털 작품 경매가 가능한 스마트 컨트랙트 제작
* 대표 퍼블릭/프라이빗 블록체인 오픈 소스에 대한 이해와 경험
  * 이더리움 및 하이퍼 레저 패브릭 네트워크 구축
  * 프론트엔드와 이더리움 간 연동
  * 이더리움 스마트 컨트랜트 개발
  * 하이퍼레저 패브릿 체인 코드 개발

#### 2~7주

* 디지털 작품 경매 가능 시스템을 위한 백엔드, 프론트엔드 구성, 블록체인과 연동

* P2P 경매 서비스 구현을 위한 기반 지식 습득

#### Part1:이더리움

* 이더리움 네크워크 구축-> 이더리움 익스플로러 구현-> 스마트 컨트랙트 작성 및 배포

